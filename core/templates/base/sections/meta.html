<!--core\templates\base\sections\meta.html  # SEO meta etiketleri-->
{% load static %}
{% load i18n %}

<!-- Basic Meta Tags -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<!-- SEO Meta Etiketleri - Dinamik Backend Entegrasyonu -->
<title>{% block title %}{{ seo_title|default:site_name }}{% endblock %}</title>
<meta name="description" content="{% block meta_description %}{{ seo_description|default:'Modern ve profesyonel hizmet anlayışımızla sizlerleyiz.' }}{% endblock %}">
<meta name="keywords" content="{% block meta_keywords %}{{ seo_keywords|default:'anahtar,çilingir,güvenlik,batman' }}{% endblock %}">
<meta name="author" content="{{ site_name|default:'Site' }}">
<meta name="robots" content="{% block robots %}index, follow{% endblock %}">
<meta name="googlebot" content="{% block googlebot %}index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1{% endblock %}">

<!-- Canonical URL -->
<link rel="canonical" href="{% block canonical %}{{ canonical_url|default:current_url }}{% endblock %}">

<!-- Language and Locale -->
<meta http-equiv="content-language" content="{{ current_language|default:'tr' }}">
<meta name="language" content="{{ current_language|default:'tr' }}">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="{% block og_type %}{{ meta_data.page_type|default:'website' }}{% endblock %}">
<meta property="og:site_name" content="{{ site_name|default:'Site' }}">
<meta property="og:title" content="{% block og_title %}{{ seo_title|default:site_name }}{% endblock %}">
<meta property="og:description" content="{% block og_description %}{{ seo_description|default:'Modern ve profesyonel hizmet anlayışımızla sizlerleyiz.' }}{% endblock %}">
<meta property="og:image" content="{% block og_image %}{{ request.build_absolute_uri }}{% if site_logo %}{{ site_logo.url }}{% else %}{% static 'images/og-image.jpg' %}{% endif %}{% endblock %}">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:alt" content="{{ site_name|default:'Site' }} - {% block og_image_alt %}{{ seo_title|default:'Logo' }}{% endblock %}">
<meta property="og:url" content="{{ canonical_url|default:current_url }}">
<meta property="og:locale" content="{% if current_language == 'tr' %}tr_TR{% elif current_language == 'en' %}en_US{% elif current_language == 'de' %}de_DE{% elif current_language == 'fr' %}fr_FR{% elif current_language == 'ar' %}ar_SA{% elif current_language == 'ru' %}ru_RU{% else %}tr_TR{% endif %}">

<!-- Article Meta (for blog posts, news, etc.) -->
{% if meta_data.page_type == 'article' %}
{% if meta_data.article_published_time %}
<meta property="article:published_time" content="{{ meta_data.article_published_time }}">
{% endif %}
{% if meta_data.article_modified_time %}
<meta property="article:modified_time" content="{{ meta_data.article_modified_time }}">
{% endif %}
{% if meta_data.article_author %}
<meta property="article:author" content="{{ meta_data.article_author }}">
{% endif %}
{% if meta_data.article_section %}
<meta property="article:section" content="{{ meta_data.article_section }}">
{% endif %}
{% endif %}

<!-- Product Meta (for product pages) -->
{% if meta_data.page_type == 'product' %}
{% if meta_data.product_price %}
<meta property="product:price:amount" content="{{ meta_data.product_price|cut:'₺'|cut:' ' }}">
<meta property="product:price:currency" content="TRY">
{% endif %}
{% if meta_data.product_availability %}
<meta property="product:availability" content="{{ meta_data.product_availability }}">
{% endif %}
{% endif %}

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@{{ site_name|lower|cut:' '|default:'site' }}">
<meta name="twitter:creator" content="@{{ site_name|lower|cut:' '|default:'site' }}">
<meta name="twitter:title" content="{% block twitter_title %}{{ seo_title|default:site_name }}{% endblock %}">
<meta name="twitter:description" content="{% block twitter_description %}{{ seo_description|default:'Modern ve profesyonel hizmet anlayışımızla sizlerleyiz.' }}{% endblock %}">
<meta name="twitter:image" content="{% block twitter_image %}{{ request.build_absolute_uri }}{% if site_logo %}{{ site_logo.url }}{% else %}{% static 'images/twitter-card.jpg' %}{% endif %}{% endblock %}">
<meta name="twitter:image:alt" content="{{ site_name|default:'Site' }} - {% block twitter_image_alt %}{{ seo_title|default:'Logo' }}{% endblock %}">

<!-- Geo Tags -->
<meta name="geo.region" content="TR-72">
<meta name="geo.placename" content="Batman">
<meta name="geo.position" content="37.8814;41.1287">
<meta name="ICBM" content="37.8814,41.1287">

<!-- Mobile and App Meta -->
<meta name="theme-color" content="{{ primary_color|default:'#007bff' }}">
<meta name="msapplication-TileColor" content="{{ primary_color|default:'#007bff' }}">
<meta name="msapplication-navbutton-color" content="{{ primary_color|default:'#007bff' }}">
<meta name="apple-mobile-web-app-title" content="{{ site_name|default:'Site' }}">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="format-detection" content="telephone=no">

<!-- Security Headers -->
<meta http-equiv="X-Content-Type-Options" content="nosniff">
<meta http-equiv="X-Frame-Options" content="DENY">
<meta http-equiv="X-XSS-Protection" content="1; mode=block">
<meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">

<!-- Performance Hints -->
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
{% if site_logo %}
<link rel="preload" href="{{ site_logo.url }}" as="image">
{% endif %}

<!-- DNS Prefetch -->
<link rel="dns-prefetch" href="//fonts.googleapis.com">
<link rel="dns-prefetch" href="//fonts.gstatic.com">
<link rel="dns-prefetch" href="//cdn.jsdelivr.net">
<link rel="dns-prefetch" href="//cdnjs.cloudflare.com">

<!-- Favicon and Icons -->
<link rel="icon" href="{% if favicon %}{{ favicon.url }}{% else %}{% static 'images/favicon.ico' %}{% endif %}" type="image/x-icon">
<link rel="shortcut icon" href="{% if favicon %}{{ favicon.url }}{% else %}{% static 'images/favicon.ico' %}{% endif %}" type="image/x-icon">
<link rel="apple-touch-icon" sizes="57x57" href="{% static 'images/apple-icon-57x57.png' %}">
<link rel="apple-touch-icon" sizes="60x60" href="{% static 'images/apple-icon-60x60.png' %}">
<link rel="apple-touch-icon" sizes="72x72" href="{% static 'images/apple-icon-72x72.png' %}">
<link rel="apple-touch-icon" sizes="76x76" href="{% static 'images/apple-icon-76x76.png' %}">
<link rel="apple-touch-icon" sizes="114x114" href="{% static 'images/apple-icon-114x114.png' %}">
<link rel="apple-touch-icon" sizes="120x120" href="{% static 'images/apple-icon-120x120.png' %}">
<link rel="apple-touch-icon" sizes="144x144" href="{% static 'images/apple-icon-144x144.png' %}">
<link rel="apple-touch-icon" sizes="152x152" href="{% static 'images/apple-icon-152x152.png' %}">
<link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/apple-icon-180x180.png' %}">
<link rel="icon" type="image/png" sizes="192x192" href="{% static 'images/android-icon-192x192.png' %}">
<link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/favicon-32x32.png' %}">
<link rel="icon" type="image/png" sizes="96x96" href="{% static 'images/favicon-96x96.png' %}">
<link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon-16x16.png' %}">

<!-- PWA Manifest -->
<link rel="manifest" href="{% static 'manifest.json' %}">

<!-- Schema.org Structured Data - LocalBusiness -->
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "{% if meta_data.page_type == 'product' %}Product{% elif meta_data.page_type == 'article' %}Article{% else %}LocalBusiness{% endif %}",
    {% if meta_data.page_type == 'product' %}
    "name": "{% block schema_product_name %}{{ seo_title|default:site_name }}{% endblock %}",
    "description": "{% block schema_product_description %}{{ seo_description|default:'Modern ve profesyonel hizmet anlayışımızla sizlerleyiz.' }}{% endblock %}",
    "image": "{% block schema_product_image %}{{ request.build_absolute_uri }}{% if site_logo %}{{ site_logo.url }}{% else %}{% static 'images/og-image.jpg' %}{% endif %}{% endblock %}",
    {% if meta_data.product_price %}
    "offers": {
        "@type": "Offer",
        "price": "{{ meta_data.product_price|cut:'₺'|cut:' ' }}",
        "priceCurrency": "TRY",
        "availability": "https://schema.org/{{ meta_data.product_availability|default:'InStock' }}"
    },
    {% endif %}
    "brand": {
        "@type": "Brand",
        "name": "{{ site_name|default:'Site' }}"
    },
    {% elif meta_data.page_type == 'article' %}
    "headline": "{% block schema_article_headline %}{{ seo_title|default:site_name }}{% endblock %}",
    "description": "{% block schema_article_description %}{{ seo_description|default:'Modern ve profesyonel hizmet anlayışımızla sizlerleyiz.' }}{% endblock %}",
    "image": "{% block schema_article_image %}{{ request.build_absolute_uri }}{% if site_logo %}{{ site_logo.url }}{% else %}{% static 'images/og-image.jpg' %}{% endif %}{% endblock %}",
    {% if meta_data.article_published_time %}
    "datePublished": "{{ meta_data.article_published_time }}",
    {% endif %}
    {% if meta_data.article_modified_time %}
    "dateModified": "{{ meta_data.article_modified_time }}",
    {% endif %}
    "author": {
        "@type": "Organization",
        "name": "{{ site_name|default:'Site' }}"
    },
    "publisher": {
        "@type": "Organization",
        "name": "{{ site_name|default:'Site' }}",
        "logo": {
            "@type": "ImageObject",
            "url": "{{ request.build_absolute_uri }}{% if site_logo %}{{ site_logo.url }}{% else %}{% static 'images/logo.png' %}{% endif %}"
        }
    },
    {% if meta_data.article_section %}
    "articleSection": "{{ meta_data.article_section }}",
    {% endif %}
    {% else %}
    "name": "{{ site_name|default:'Site' }}",
    "description": "{{ seo_description|default:'Modern ve profesyonel hizmet anlayışımızla sizlerleyiz.' }}",
    "image": "{{ request.build_absolute_uri }}{% if site_logo %}{{ site_logo.url }}{% else %}{% static 'images/og-image.jpg' %}{% endif %}",
    "@id": "{{ request.build_absolute_uri }}#business",
    "url": "{{ request.build_absolute_uri }}",
    {% if contact_phone %}
    "telephone": "{{ contact_phone }}",
    {% endif %}
    "priceRange": "₺₺",
    {% if contact_address %}
    "address": {
        "@type": "PostalAddress",
        "streetAddress": "{{ contact_address|striptags|default:'Batman Merkez' }}",
        "addressLocality": "Batman",
        "addressRegion": "Batman",
        "postalCode": "72000",
        "addressCountry": "TR"
    },
    {% endif %}
    "openingHoursSpecification": {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
        "opens": "08:00",
        "closes": "18:00"
    },
    {% endif %}
    {% if has_social_media %}
    "sameAs": [
        {% if facebook_url %}"{{ facebook_url }}"{% if instagram_url or twitter_url or youtube_url %},{% endif %}{% endif %}
        {% if instagram_url %}"{{ instagram_url }}"{% if twitter_url or youtube_url %},{% endif %}{% endif %}
        {% if twitter_url %}"{{ twitter_url }}"{% if youtube_url %},{% endif %}{% endif %}
        {% if youtube_url %}"{{ youtube_url }}"{% endif %}
    ]
    {% endif %}
}
</script>

<!-- Breadcrumb Schema -->
{% if meta_data.breadcrumbs and meta_data.breadcrumbs|length > 1 %}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
        {% for breadcrumb in meta_data.breadcrumbs %}
        {
            "@type": "ListItem",
            "position": {{ forloop.counter }},
            "name": "{{ breadcrumb.name|escape }}",
            "item": "{{ request.scheme }}://{{ request.get_host }}{{ breadcrumb.url }}"
        }{% if not forloop.last %},{% endif %}
        {% endfor %}
    ]
}
</script>
{% endif %}